// Code generated by protoc-gen-liverpc v0.1, DO NOT EDIT.
// source: v1/TitleStuff.proto

package v1

import context "context"

import proto "github.com/golang/protobuf/proto"
import "go-common/library/net/rpc/liverpc"

var _ proto.Message // generate to suppress unused imports

// ====================
// TitleStuff Interface
// ====================

type TitleStuffRPCClient interface {
	// * 添加头衔经验原石
	//
	Add(ctx context.Context, req *TitleStuffAddReq, opts ...liverpc.CallOption) (resp *TitleStuffAddResp, err error)
}

// ==========================
// TitleStuff Live Rpc Client
// ==========================

type titleStuffRPCClient struct {
	client *liverpc.Client
}

// NewTitleStuffRPCClient creates a client that implements the TitleStuffRPCClient interface.
func NewTitleStuffRPCClient(client *liverpc.Client) TitleStuffRPCClient {
	return &titleStuffRPCClient{
		client: client,
	}
}

func (c *titleStuffRPCClient) Add(ctx context.Context, in *TitleStuffAddReq, opts ...liverpc.CallOption) (*TitleStuffAddResp, error) {
	out := new(TitleStuffAddResp)
	err := doRPCRequest(ctx, c.client, 1, "TitleStuff.add", in, out, opts)
	if err != nil {
		return nil, err
	}
	return out, nil
}
