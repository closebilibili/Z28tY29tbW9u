// Code generated by protoc-gen-liverpc v0.1, DO NOT EDIT.
// source: v1/RoomPendant.proto

package v1

import context "context"

import proto "github.com/golang/protobuf/proto"
import "go-common/library/net/rpc/liverpc"

var _ proto.Message // generate to suppress unused imports

// =====================
// RoomPendant Interface
// =====================

type RoomPendantRPCClient interface {
	// * 根据roomids批量获取角标
	//
	GetPendantByIds(ctx context.Context, req *RoomPendantGetPendantByIdsReq, opts ...liverpc.CallOption) (resp *RoomPendantGetPendantByIdsResp, err error)
}

// ===========================
// RoomPendant Live Rpc Client
// ===========================

type roomPendantRPCClient struct {
	client *liverpc.Client
}

// NewRoomPendantRPCClient creates a client that implements the RoomPendantRPCClient interface.
func NewRoomPendantRPCClient(client *liverpc.Client) RoomPendantRPCClient {
	return &roomPendantRPCClient{
		client: client,
	}
}

func (c *roomPendantRPCClient) GetPendantByIds(ctx context.Context, in *RoomPendantGetPendantByIdsReq, opts ...liverpc.CallOption) (*RoomPendantGetPendantByIdsResp, error) {
	out := new(RoomPendantGetPendantByIdsResp)
	err := doRPCRequest(ctx, c.client, 1, "RoomPendant.getPendantByIds", in, out, opts)
	if err != nil {
		return nil, err
	}
	return out, nil
}
